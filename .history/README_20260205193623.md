# ğŸš€ Browser Automation Docker Setup

A complete Docker setup for browser automation using Puppeteer with web-accessible VNC viewer (noVNC) and Windows Task Scheduler integration.

## âœ¨ Features

- âœ… **Web Browser Access** - Access the automated browser via `http://localhost:6080` (noVNC)
- âœ… **Traditional VNC Access** - Direct VNC client connection on port `5900`
- âœ… **Docker Automation** - Container auto-restarts on failure
- âœ… **Windows Task Scheduler** - Schedule automated runs (daily, hourly, or custom)
- âœ… **Puppeteer Integration** - Full browser automation capabilities
- âœ… **Visual Feedback** - See what the browser automation is doing in real-time
- âœ… **File Persistence** - Screenshots and outputs saved to your local directory

## ğŸ“‹ Prerequisites

- **Windows 10/11** with Docker Desktop installed
- **Docker Desktop** (latest version recommended)
- **PowerShell** (for running setup scripts)
- **4GB RAM minimum** (8GB recommended)

## ğŸš€ Quick Start

### Option 1: Automatic Startup (Recommended)

Run this PowerShell script to start the automation:

```powershell
.\start-automation.ps1
```

This will:
1. Check Docker installation
2. Build the Docker image
3. Start the container
4. Automatically open the web interface in your browser
5. Display live logs

### Option 2: Manual Docker Command

```bash
# Build the image
docker build -t browser-automation .

# Start the container
docker-compose up -d

# View logs
docker-compose logs -f
```

## ğŸŒ Access the Browser

### Web Access (Easiest - No Software Needed)

1. **Open your browser** and go to: `http://localhost:6080`
2. **You'll see the browser automation running in real-time**
3. **Watch the script execute** without a VNC client

### Traditional VNC Access

If you prefer a VNC client:

1. **Install a VNC viewer** (TightVNC, RealVNC, UltraVNC, etc.)
2. **Connect to:** `localhost:5900`
3. **Enter a password if prompted**

## ğŸ“… Schedule Automated Runs

### Setup Scheduler

Run this as Administrator:

```powershell
.\schedule-task.ps1
```

This will:
1. Ask you for preferred schedule (Daily at specific time, every 6 hours, etc.)
2. Create a Windows Task Scheduler entry
3. The container will automatically start at scheduled times

### View Scheduled Tasks

1. Press `Win + R`
2. Type `taskschd.msc`
3. Find `BrowserAutomationDocker` in the task list
4. Right-click to view details, run manually, or edit

## ğŸ“ Customizing Your Automation

### Edit the Script

Modify [script.js](script.js) to change what the browser does. Example:

```javascript
// Navigate to a different website
await page.goto("https://example.com", { waitUntil: "networkidle2" });

// Fill a form
await page.type('input[name="search"]', 'Hello World');
await page.click('button[type="submit"]');

// Wait for element
await page.waitForSelector('.results');

// Take screenshot
await page.screenshot({ path: "results.png" });
```

### Environment Variables

Edit `docker-compose.yml` to pass environment variables to your script:

```yaml
environment:
  - NODE_ENV=production
  - WEBSITE_URL=https://example.com
  - AUTOMATION_INTERVAL=3600
```

Access them in `script.js`:

```javascript
const website = process.env.WEBSITE_URL || 'https://google.com';
const interval = parseInt(process.env.AUTOMATION_INTERVAL) || 3600;
```

## ğŸ›‘ Stop the Container

**Graceful shutdown:**
```bash
docker-compose down
```

**Or from PowerShell:**
```powershell
docker-compose down
```

## ğŸ“Š View Logs

**Real-time logs:**
```bash
docker-compose logs -f
```

**Last 100 lines:**
```bash
docker-compose logs --tail=100
```

**Specific service:**
```bash
docker-compose logs browser-automation
```

## ğŸ”§ Troubleshooting

### Issue: "Docker is not installed"
**Solution:** Install [Docker Desktop](https://www.docker.com/products/docker-desktop)

### Issue: Port 6080 or 5900 already in use
**Solution:** Modify `docker-compose.yml`:
```yaml
ports:
  - "6081:6080"  # Use 6081 instead
  - "5901:5900"  # Use 5901 instead
```

### Issue: Script runs too fast or too slow
**Solution:** Add delays in `script.js`:
```javascript
await page.waitForTimeout(2000); // Wait 2 seconds
```

### Issue: Container keeps restarting
**Solution:** Check logs with `docker-compose logs` to see the error. Fix the issue in `script.js`, rebuild (`docker build -t browser-automation .`), and restart.

### Issue: Can't see the browser automation
**Solution:** Ensure port 6080 is accessible - try opening `http://localhost:6080` in your browser

## ğŸ“‚ File Structure

```
.
â”œâ”€â”€ Dockerfile                 # Docker image definition
â”œâ”€â”€ docker-compose.yml         # Docker Compose configuration
â”œâ”€â”€ package.json               # Node.js dependencies
â”œâ”€â”€ script.js                  # Your automation script
â”œâ”€â”€ start-automation.ps1       # Quick start script
â”œâ”€â”€ schedule-task.ps1          # Task Scheduler setup
â”œâ”€â”€ run.bat                    # Windows batch runner
â”œâ”€â”€ run.sh                     # Linux/Mac bash runner
â””â”€â”€ screenshots/               # Output directory (auto-created)
```

## ğŸ³ Docker Commands Reference

```bash
# Build image
docker build -t browser-automation .

# Start container
docker-compose up -d

# Stop container
docker-compose down

# View containers
docker ps

# View logs
docker-compose logs -f

# Execute command in container
docker-compose exec browser-automation bash

# Remove image
docker rmi browser-automation

# Clean up (remove stopped containers)
docker container prune
```

## ğŸ“š Advanced: Continuous Integration

You can extend this for CI/CD pipelines:

```bash
# In your CI pipeline (GitHub Actions, etc.)
docker-compose up --abort-on-container-exit
docker-compose down
```

## ğŸ” Security Notes

- Change the VNC password in `Dockerfile` if exposing to network
- Use environment variables for sensitive data (URLs, credentials)
- Don't commit screenshots with sensitive information to git
- Use Docker networks to isolate containers

## ğŸ“ Support

- **Docker Issues:** Check [Docker Desktop documentation](https://docs.docker.com/)
- **Puppeteer Help:** Visit [Puppeteer documentation](https://pptr.dev/)
- **VNC Issues:** Ensure ports 5900 and 6080 aren't blocked by firewall

## ğŸ“„ License

This setup is provided as-is for educational and automation purposes.

---

**Happy Automating! ğŸ‰**
